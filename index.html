<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Kejohanan Merentas Desa</title>
    <link rel="stylesheet" href="style.css"> 
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
</head>
<body>
    <header>
        <h1>ğŸ† Regional/State Level Cross Country Championship Scoring and Statistics System ğŸƒâ€â™‚ï¸</h1>
        <p>Age-Category Based Web Application</p>
        <button id="logout-btn" onclick="handleLogout()" style="display: none; background-color: #ffc107; color: #333; padding: 5px 10px;">
            Log Keluar
        </button>
    </header>

    <div id="login-container">
        <h2>Access Login</h2>
        <form id="login-form">
            <label for="login-email">Email:</label>
            <input type="email" id="login-email" required><br>
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" required><br>
            <button type="submit">Login</button>
            <p id="login-status" style="color: red; margin-top: 10px;"></p>
        </form>
    </div>

    <main style="display: none;">
        <div class="main-tab-buttons">
            <button id="data-tab-btn" class="main-tab-link active" onclick="openMainTab(event, 'data-tab')">ğŸ“Š Data Management</button>
            <button id="analisis-tab-btn" class="main-tab-link" onclick="openMainTab(event, 'analisis-tab')">ğŸ“ˆ Results Analysis</button>
        </div>
        
        <div id="data-tab" class="main-tab-content active">
            
            <section class="card">
                <h2>1. Upload & Manage Participant Data</h2>
                
                <h3>Upload File</h3>
                <p><strong>Format CSV (Use the header provided):</strong> NoBadan, NamaPenuh, Jantina(L/P), Kategori(L17), Pasukan/Sekolah</p>
                <input type="file" id="csv-input" accept=".csv">
                <button onclick="handleMuatNaikCSV()">Upload and Register</button>
                <p id="csv-status"></p>
                
                <hr>
                
                <h3>Delete / Reset (Admin)</h3>
                <p style="color: #6c757d;">This function is only for clearing application data. Data must be re-uploaded if deleted.</p>
                <button onclick="handlePadamPeserta()" style="background-color: #ff9800;">Delete Individual Participant</button>
                <button onclick="resetSemuaData()" style="background-color: #f44336;">RESET ALL DATA</button>
            </section>

            <section class="card">
                <h2>2. Participants List (Ranking Entry)</h2>
                <p>Click and edit directly in the KEDUDUKAN (RANK) field to record the Results (Overall Rank)..</p>
                <input type="text" id="filterInput" onkeyup="filterTable()" placeholder="FIND">
                <div id="result-senarai" class="result-area">
                    <p>Participants List will be display HERE.</p>
                </div>
            </section>
        </div>

        <div id="analisis-tab" class="main-tab-content">
            <section class="card">
                <h2>Championship Result</h2>
                
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="sub-tab-link active" onclick="openSubTab(event, 'individu-tab', analisisIndividu)">ğŸ… Individual Ranking</button>
                        <button class="sub-tab-link" onclick="openSubTab(event, 'kumpulan-tab', analisisKumpulan)">ğŸ›ï¸ Group Winner</button>
                    </div>

                    <div id="individu-tab" class="sub-tab-content active">
                        <h3>Individual Ranking (Category Based)</h3>
                        <p>Analysis show Ranking Placing Based on Category for each participant.</p>
                        <div id="result-individu" class="result-area">
                            <p>Individual Result Analysis will be shown HERE.</p>
                        </div>
                    </div>

                    <div id="kumpulan-tab" class="sub-tab-content">
                        <h3>Group Winner (Accumulated Category Score)</h3>
                        <p>Team scores are calculated based on the total of the individual Age Category Ranks for the top 4 participants. The lowest score is counted as the winner. The Rank of the 5th participant serves as the Tie-Breaker..</p>
                        <div id="result-kumpulan" class="result-area">
                            <p>Group Result Analysis will be shown HERE.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
    </main>

    <footer>
        <p>&copy; 2025 Aplikasi Kejohanan Merentas Desa</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
